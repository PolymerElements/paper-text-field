<!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
-->

<link rel="import" href="../paper-styles/color.html">
<link rel="import" href="../paper-styles/typography.html">
<link rel="import" href="../paper-styles/default-theme.html">
<link rel="import" href="../iron-flex-layout/iron-flex-layout.html">

<dom-module id="paper-text-field-shared-styles">
  <template>
    <style>
      :host {
        display: block;
        padding: 8px 0;
        @apply(--paper-text-field);
      }

      [hidden] {
        display: none !important;
      }

      :host([disabled]) {
        pointer-events: none;
        opacity: 0.33;
        @apply(--paper-text-field-disabled);
      }

      /* Restrict div contenteditable */
      #input {
        min-height: 24px; /* FF doesn't seem to have a default */
        z-index: 1;

        /* Force single line */
        white-space: nowrap;
        overflow: hidden;
      }

      /* We manage the focus UI separately */
      #input:focus {
        outline: none;
      }

      /* Don't allow new lines */
      #input ::content br, #input br {
        display:none !important;
      }
      #input ::content *, #input * {
        display:inline;
        white-space:nowrap;
      }

      .floated-label-placeholder {
        @apply(--paper-font-caption);
      }

      /*****************************
       * Underline
       ******************************/
      .underline {
        position: relative;
      }

      .focused-line {
        height: 2px;

        transform-origin: center center;
        -webkit-transform-origin: center center;
        transform: scale3d(0,1,1);
        -webkit-transform: scale3d(0,1,1);

        background: var(--paper-text-field-focus-color, --default-primary-color);

        @apply(--layout-fit);
        @apply(--paper-text-field-underline-focus);
      }

      .underline.is-highlighted .focused-line {
        -webkit-transform: none;
        transform: none;
        -webkit-transition: -webkit-transform 0.25s;
        transition: transform 0.25s;

        @apply(--paper-transition-easing);
      }

      .unfocused-line {
        height: 1px;
        background: var(--paper-text-field-color, --secondary-text-color);

        @apply(--layout-fit);
        @apply(--paper-text-field-underline);
      }

      :host([disabled]) .unfocused-line {
        border-bottom: 1px dashed;
        border-color: var(--paper-text-field-color, --secondary-text-color);
        background: transparent;

        @apply(--paper-text-field-underline-disabled);
      }

      /*****************************
       * Input
       ******************************/
      .input-content {
        position: relative;
        @apply(--layout-horizontal);
        @apply(--layout-end);
      }

      .input-content #input {
        position: relative; /* to make a stacking context */
        outline: none;
        box-shadow: none;
        padding: 0;
        width: 100%;
        background: transparent;
        border: none;
        color: var(--paper-text-field-input-color, --primary-text-color);
        -webkit-appearance: none;
        text-align: inherit;

        @apply(--paper-font-subhead);
        @apply(--paper-text-field-input);
      }

      /*****************************
       * Label
       ******************************/
      .input-content label  {
        position: absolute;
        top: 0;
        right: 0;
        left: 0;
        font: inherit;
        color: var(--paper-text-field-color, --secondary-text-color);

        @apply(--paper-font-common-nowrap);
        @apply(--paper-font-subhead);
        @apply(--paper-text-field-label);
      }

      .input-content label.label-is-floating {
        -webkit-transform: translateY(-75%) scale(0.75);
        transform: translateY(-75%) scale(0.75);
        -webkit-transition: -webkit-transform 0.25s;
        transition: transform 0.25s;

        -webkit-transform-origin: left top;
        transform-origin: left top;

        /* Since we scale to 75/100 of the size, we actually have 100/75 of the
        original space now available */
        width: 133%;

        @apply(--paper-transition-easing);
        @apply(--paper-text-field-label-floating);
      }

      :host-context([dir="rtl"]) .input-content label.label-is-floating {
        /* TODO(noms): Figure out why leaving the width at 133% before the animation
         * actually makes
         * it wider on the right side, not left side, as you would expect in RTL */
        width: 100%;
        -webkit-transform-origin: right top;
        transform-origin: right top;
      }

      .input-content label.label-is-highlighted {
        color: var(--paper-text-field-focus-color, --default-primary-color);
        @apply(--paper-text-field-label-focus);
      }

      .input-content label.label-is-hidden {
        visibility: hidden;
      }
    </style>
</dom-module>
